---
title: 【Gulp】生成程式碼map以利除錯編譯
date: 2023-08-15
tags: ["gulp"]
---
### gulp-sourcemaps
1. 在專案中打開終端機安裝`gulp-sourcemaps`、`gulp-sass`、`sass`套件(版本@1.62.0)
```html
$ npm install gulp-sourcemaps gulp-sass sass@1.62.0
```

-----------------------------------------------
2. 在gulpfile.js新增程式碼
```js
const gulp = require('gulp');
const sass = require('gulp-sass')(require('sass'));
const sourcemaps = require('gulp-sourcemaps');

gulp.task('sass', function(){
  return gulp
    .src('src/scss/**/*.*')
    .pipe(sourcemaps.init()) //sourcemaps初始化
    .pipe(
      sass().on('error',sass.logError)
    )
    .pipe(sourcemaps.write("./")) //在當前的目錄下，生成sourcemaps文件
    .pipe(gulp.dest('dist/css'))
});
```

-----------------------------------------------
3. 在終端機執行指令
```html
$ gulp sass
```

-----------------------------------------------
4. 執行結果會在all.css旁自動新加入一個.map檔
```
you project
├─── node_modules/        
├─── dist/
│     │
│     └─── css/
│           │
│           ├─── all.css  
│           │   
│           └─── all.css.map  #自動生成的map檔
│  
├─── src/
│     └─── scss/
│           │
│           ├─── all.scss   
│           │
│           └─── helpers
│                 │
│                 └─── _variables.scss
│
├─── gulpfile.js          
├─── package-lock.json    
└─── package.json  
```

-----------------------------------------------
5. 回到gulpfile.js添加任務清單
```js
gulp.task('default', gulp.series('sass'));
```

-----------------------------------------------
6. 最後，在終端機執行`gulp`即可完成任務
```html
$ gulp
```